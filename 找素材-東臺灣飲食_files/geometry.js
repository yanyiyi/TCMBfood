!function(){"undefined"==typeof geo&&(geo={});var t=1e-10;function i(i,h){return Math.abs(i-h)<t}function h(i,h){return i-h>-t}function e(t,i){return h(i,t)}geo.eq=i,geo.gt=h,geo.lt=e,geo.LineSegment=function(t,h,e,n){if(this.x1=t,this.y1=h,this.x2=e,this.y2=n,this.a=n-h,this.b=t-e,this.c=t*this.a+h*this.b,i(this.a,0)&&i(this.b,0))throw new Error("Cannot construct a LineSegment with two equal endpoints.")},geo.LineSegment.prototype.intersect=function(t){var n=(this.x1-this.x2)*(t.y1-t.y2)-(this.y1-this.y2)*(t.x1-t.x2);if(i(n,0))return{x:NaN,y:NaN};var s=this.x1*this.y2-this.y1*this.x2,o=t.x1*t.y2-t.y1*t.x2,y=(s*(t.x1-t.x2)-o*(this.x1-this.x2))/n,x=(s*(t.y1-t.y2)-o*(this.y1-this.y2))/n;return{x:y,y:x,in1:h(y,Math.min(this.x1,this.x2))&&e(y,Math.max(this.x1,this.x2))&&h(x,Math.min(this.y1,this.y2))&&e(x,Math.max(this.y1,this.y2)),in2:h(y,Math.min(t.x1,t.x2))&&e(y,Math.max(t.x1,t.x2))&&h(x,Math.min(t.y1,t.y2))&&e(x,Math.max(t.y1,t.y2))}},geo.LineSegment.prototype.x=function(t){return this.a?(this.c-this.b*t)/this.a:NaN},geo.LineSegment.prototype.y=function(t){return this.b?(this.c-this.a*t)/this.b:NaN},geo.LineSegment.prototype.length=function(){return Math.sqrt((this.y2-this.y1)*(this.y2-this.y1)+(this.x2-this.x1)*(this.x2-this.x1))},geo.LineSegment.prototype.offset=function(t,i){return new geo.LineSegment(this.x1+t,this.y1+i,this.x2+t,this.y2+i)}}();