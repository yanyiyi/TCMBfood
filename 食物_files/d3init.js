function createD3ProcessMap(t,e,n,r,o){var i={d3Config:n,d3graphObj:$(t),d3graphContainer:$(e),onClickEvent:o.clickEvent,onDoubleClickEvent:o.doubleClickEvent,onLoadCompleteEvent:o.loadCompleteEvent},a={},s={},l=null,c=!1,d=0,g=400,h=!1;var u=26,f=" /_-.".split("");function p(t){for(var e in a.numTicks++,a.data){var n=a.data[e];n.positionConstraints.forEach(function(e){var r=e.weight*t.alpha;isNaN(e.x)||(n.x=e.x*r+n.x*(1-r)),isNaN(e.y)||(n.y=e.y*r+n.y*(1-r))})}a.preventCollisions&&function(){var t=d3.geom.quadtree(a.nodeValues);for(var e in a.data){var n=a.data[e],r=n.x+n.extent.left,o=n.x+n.extent.right,i=n.y+n.extent.top,s=n.y+n.extent.bottom;t.visit(function(t,e,a,l,c){if(t.point&&t.point!==n){var d=t.point,g=d.x+d.extent.left,h=d.x+d.extent.right,u=d.y+d.extent.top,f=d.y+d.extent.bottom,p=g<=o&&r<=h&&u<=s&&i<=f;if(p){var y=o-g,x=h-r,m=s-u,v=f-i,k=Math.min(y,x,m,v);k==y?(n.x-=k/2,d.x+=k/2):k==x?(n.x+=k/2,d.x-=k/2):k==m?(n.y-=k/2,d.y+=k/2):k==v&&(n.y+=k/2,d.y-=k/2)}return p}})}}(),a.line.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).each(function(t){c&&this.parentNode.insertBefore(this,this);var e=t.target.x,n=t.target.y,r=new geo.LineSegment(t.source.x,t.source.y,e,n);for(var o in t.target.edge){var i=r.intersect(t.target.edge[o].offset(e,n));if(i.in1&&i.in2){e=i.x,n=i.y;break}}d3.select(this).attr("x2",e).attr("y2",n)}),a.node.attr("transform",function(t){return"translate("+t.x+","+t.y+")"})}function y(t){a.node.classed("selected",!1),s={},x(null)}function x(t){if(!i.d3Config.isHighlight)return!1;t?(t!==l&&(a.node.classed("inactive",function(e){return t!==e&&-1==e.depends.indexOf(t.name)&&-1==e.dependedOnBy.indexOf(t.name)}),a.line.classed("inactive",function(e){return t!==e.source&&t!==e.target})),l=t):(l&&(a.node.classed("inactive",!1),a.line.classed("inactive",!1)),l=null)}function m(t){return!1}!function(e){try{a.force.stop()}catch(t){}c=$.browser.msie,a.data=e.data,function(){i.d3graphObj.empty(),a.margin={top:110,right:20,bottom:20,left:50};var e=i.d3graphObj.css("display");for(var n in i.d3graphObj.css("display","block").css("height",i.d3Config.graph.height+"px"),i.d3graphObj.css("display","block").css("width",i.d3Config.graph.width+"px"),a.width=i.d3graphObj.width()-a.margin.left-a.margin.right,a.height=i.d3graphObj.height()-a.margin.top-a.margin.bottom,i.d3graphObj.css("display",e),a.links=[],a.categories={},a.data){var r=a.data[n];for(var o in r.positionConstraints=[],r.linkStrength=1,i.d3Config.constraints.forEach(function(t){for(var e in t.has)if(t.has[e]!==r[e])return!0;switch(t.type){case"position":r.positionConstraints.push({weight:t.weight,x:t.x*a.width,y:t.y*a.height});break;case"linkStrength":r.linkStrength*=t.strength}}),r.depends){var l={source:a.data[r.depends[o]],target:r};l.strength=(l.source.linkStrength||1)*(l.target.linkStrength||1),a.links.push(l)}var c=r.type+":"+(r.group||""),m=a.categories[c];r.categoryKey=c,m||(m=a.categories[c]={key:c,type:r.type,typeName:i.d3Config.types[r.type]?i.d3Config.types[r.type].shortTitle:r.type,group:r.group,count:0}),m.count++}function v(t){return d3.scale.ordinal().domain(a.categoryKeys).range(a.colors.map(function(e){return d3.hsl(e).darker(t).toString()}))}a.categoryKeys=d3.keys(a.categories),a.colors=colorbrewer.Set3[i.d3Config.graph.numColors],a.strokeColor=v(.7),a.fillColor=v(-.1),a.nodeValues=d3.values(a.data),a.force=d3.layout.force().nodes(a.nodeValues).links(a.links).linkStrength(function(t){return t.strength}).size([a.width,a.height]).linkDistance(i.d3Config.graph.linkDistance).charge(i.d3Config.graph.charge).on("tick",p),a.svg=d3.select(t).append("svg").attr("width",a.width+a.margin.left+a.margin.right).attr("height",a.height+a.margin.top+a.margin.bottom).append("g").attr("transform"," scale(1.4)"),a.svg.append("defs").selectAll("marker").data(["end"]).enter().append("marker").attr("id",String).attr("viewBox","0 -5 10 10").attr("refX",10).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5");var k=a.svg.append("filter").attr("x","-50%").attr("y","-50%").attr("width","200%").attr("height","200%").attr("id","blue-glow");k.append("feColorMatrix").attr("type","matrix").attr("values","0 0 0 0  0 0 0 0 0  0 0 0 0 0  .7 0 0 0 1  0 "),k.append("feGaussianBlur").attr("stdDeviation",3).attr("result","coloredBlur"),k.append("feMerge").selectAll("feMergeNode").data(["coloredBlur","SourceGraphic"]).enter().append("feMergeNode").attr("in",String),a.legend=a.svg.append("g").attr("class","legend").attr("x",0).attr("y",0).selectAll(".category").data(d3.values(a.categories)).enter().append("g").attr("class","category"),a.legendConfig={rectWidth:12,rectHeight:12,xOffset:-10,yOffset:30,xOffsetText:20,yOffsetText:10,lineHeight:15},a.legend.append("text").attr("x",a.legendConfig.xOffsetText).attr("y",function(t,e){return a.legendConfig.yOffsetText+e*a.legendConfig.lineHeight}).text(function(t){return t.typeName+(t.group?": "+t.group:"")}),i.d3graphContainer.on("scroll",function(){a.legend.attr("transform","translate(0,"+$(this).scrollTop()+")")}),a.line=a.svg.append("g").selectAll(".link").data(a.force.links()).enter().append("line").attr("class","link"),a.draggedThreshold=d3.scale.linear().domain([0,.1]).range([5,20]).clamp(!0),i.d3graphContainer.on("click",function(t){$(t.target).closest(".node").length||y()}),a.node=a.svg.selectAll(".node").data(a.force.nodes()).enter().append("g").attr("class","node").on("mouseover",function(t){s.obj||(a.mouseoutTimeout&&(clearTimeout(a.mouseoutTimeout),a.mouseoutTimeout=null),x(t))}).on("mouseout",function(){s.obj||(a.mouseoutTimeout&&(clearTimeout(a.mouseoutTimeout),a.mouseoutTimeout=null),a.mouseoutTimeout=setTimeout(function(){x(null)},300))}).on("click",function(t){if(!d3.event.defaultPrevented)try{var e=$(this).find("text").text(),n=t.categoryKey;if(n=n.substring(0,n.length-1),null==i.onDoubleClickEvent)return i.onClickEvent(e,n),!1;d=setTimeout(function(){h||i.onClickEvent(e,n),h=!1},g)}catch(t){}}).on("dblclick",function(t){if(!d3.event.defaultPrevented)try{clearTimeout(d),h=!0;var e=t.categoryKey;e=e.substring(0,e.length-1),i.onDoubleClickEvent($(this).find("text").text(),e)}catch(t){}}),a.nodeRect=a.node.append("rect").attr("rx",5).attr("ry",5).attr("stroke",function(t){return a.strokeColor(t.categoryKey)}).attr("fill",function(t){return a.fillColor(t.categoryKey)}).attr("width",120).attr("height",30).attr("categoryKey",function(t){return t.categoryKey}),a.node.each(function(t){var e=d3.select(this),n=(e.select("rect"),function t(e){if(e.length<=u)return[e];for(var n=0;n<f.length;n++)for(var r=f[n],o=u;o>=0;o--)if(e.charAt(o)===r){var i=e.substring(0,o+1);return[i].concat(t(e.substring(o+1)))}return[e.substring(0,u)].concat(t(e.substring(u)))}(t.name)),r=-1.1*n.length/2+.5;n.forEach(function(t){e.append("text").text(t).attr("dy",r+"em"),r+=1.1})}),setTimeout(function(){a.node.each(function(t){var e=d3.select(this),n=e.selectAll("text"),r={},o=!0;n.each(function(){var t=this.getBBox();(o||t.x<r.x1)&&(r.x1=t.x),(o||t.y<r.y1)&&(r.y1=t.y),(o||t.x+t.width>r.x2)&&(r.x2=t.x+t.width),(o||t.y+t.height>r.y2)&&(r.y2=t.y+t.height),o=!1}).attr("text-anchor","middle");var a=i.d3Config.graph.labelPadding,s=i.d3Config.graph.labelMargin,l=r.x2-r.x1;r.x1-=l/2,r.x2-=l/2,r.x1-=a.left,r.y1-=a.top,r.x2+=a.left+a.right,r.y2+=a.top+a.bottom,e.select("rect").attr("x",r.x1).attr("y",r.y1).attr("width",r.x2-r.x1).attr("height",r.y2-r.y1),t.extent={left:r.x1-s.left,right:r.x2+s.left+s.right,top:r.y1-s.top,bottom:r.y2+s.top+s.bottom},t.edge={left:new geo.LineSegment(r.x1,r.y1,r.x1,r.y2),right:new geo.LineSegment(r.x2,r.y1,r.x2,r.y2),top:new geo.LineSegment(r.x1,r.y1,r.x2,r.y1),bottom:new geo.LineSegment(r.x1,r.y2,r.x2,r.y2)}}),a.numTicks=0,a.preventCollisions=!1,a.force.start();for(var t=0;t<i.d3Config.graph.ticksWithoutCollisions;t++)a.force.tick();a.preventCollisions=!0,i.d3graphContainer.css("visibility","visible")})}(),$(document).on("click",".select-object",function(){alert(1);var t=a.data[$(this).data("name")];return t&&function(t,e){var n;if(e?n=d3.select(e):a.node.each(function(r){r===t&&(n=d3.select(e=this))}),n)if(n.classed("selected"))y();else{y(),s={obj:t,el:e},x(t),n.classed("selected",!0),$("#docs").html(t.docs),$("#docs-container").scrollTop(0);var r=i.d3graphContainer,o={left:t.x+t.extent.left+a.margin.left,top:t.y+t.extent.top+a.margin.top,width:t.extent.right-t.extent.left,height:t.extent.bottom-t.extent.top},l={left:r.scrollLeft(),top:r.scrollTop(),width:r.width(),height:r.height()};(o.left<l.left||o.top<l.top||o.left+o.width>l.left+l.width||o.top+o.height>l.top+l.height)&&r.animate({scrollLeft:o.left+o.width/2-l.width/2,scrollTop:o.top+o.height/2-l.height/2},500)}}(t),!1}),$(window).on("resize",m);try{i.onLoadCompleteEvent()}catch(t){}}(r)}